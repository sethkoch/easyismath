"use strict";angular.module("easyismath",["auth0.lock","angular-jwt","ui.router"]).run(["$rootScope","authService","lock","authManager","$window",function(e,t,r,a,u){e.authService=t,t.registerAuthenticationListener(),a.checkAuthOnRefresh(),r.interceptHash()}]);
"use strict";angular.module("easyismath").config(["$stateProvider","lockProvider","$urlRouterProvider","jwtOptionsProvider",function(e,t,r,o){r.otherwise("/home"),e.state("home",{url:"/home",templateUrl:"../../templates/main/index.html",controller:"MainController as main",css:"../../content/css.css"}).state("Penguin Troubles",{url:"/penguintroubles",templateUrl:"../../templates/missions/grade1/1penguintroubles.html",controller:"PenguinTroublesController as penguin"}).state("Level 2 : Hot, Hot Sun",{url:"/hothotsun",templateUrl:"../../templates/missions/grade1/2hothotsun.html",controller:"HotHotSunController as sun"}).state("profile",{url:"/profile",templateUrl:"../../templates/profile.html",controller:"ProfileController as profile"}).state("reward",{url:"/reward",templateUrl:"../../templates/reward.html",controller:"RewardController as reward"}),t.init({clientID:"PPAP5SR3NyoW8oXgSg9fI3DZ38lCcA3o",domain:"easyismath.auth0.com"}),o.config({tokenGetter:function(){return localStorage.getItem("id_token")}})}]);
"use strict";angular.module("easyismath").controller("MainController",["$rootScope","authService","userdata","$state","$window",function(e,t,r,o,a){e.isAuthenticated||a.localStorage.clear();var i=this;i.profile,t.getProfileDeferred().then(function(e){i.profile=e}).then(function(){r.getData(i.profile.user_id)}),i.level=function(t){o.go(e.userStuff.grade1)}}]);
"use strict";angular.module("easyismath").controller("NavbarController",["$rootScope","authService","userdata","$state","$window",function(t,a,e,r,o){var i=this;i.authService=a}]);
"use strict";angular.module("easyismath").controller("ProfileController",["$window","$rootScope",function(e,a){var r=this;r.auth0Profile=JSON.parse(e.localStorage.profile),r.name=r.auth0Profile.given_name||r.auth0Profile.nickname,r.userProfile=JSON.parse(e.localStorage.userProfile),r.medals=r.userProfile.medals,r.pete=r.medals.indexOf("Pete")!==-1||!1,r.sama=r.medals.indexOf("Sam")!==-1||!1}]);
"use strict";angular.module("easyismath").controller("RewardController",["$window","$sce","$state",function(e,r,a){var t=this;t.rewardImage=r.trustAsHtml(e.localStorage.rewardImage),t.rewardName=e.localStorage.reward,setTimeout(function(){a.go("home")},3e3)}]);
"use strict";!function(){function e(e,t,o,r){function n(){return c.promise}function i(){t.show()}function a(){localStorage.removeItem("id_token"),localStorage.removeItem("profile"),localStorage.removeItem("userProfile"),r.userStuff="",o.unauthenticate()}function l(){t.on("authenticated",function(e){t.getProfile(e.idToken,function(e,t){return e?console.log(e):(localStorage.setItem("profile",JSON.stringify(t)),void c.resolve(t))}),localStorage.setItem("id_token",e.idToken),o.authenticate()})}var u=JSON.parse(localStorage.getItem("profile"))||null,c=e.defer();return u&&c.resolve(u),{login:i,logout:a,registerAuthenticationListener:l,getProfileDeferred:n}}angular.module("easyismath").service("authService",e),e.$inject=["$q","lock","authManager","$rootScope"]}();
"use strict";angular.module("easyismath").factory("userdata",["$http","$rootScope","$window",function(t,a,e){var i=function(i){t.post("api/data",{id:i}).then(function(t){a.userStuff=t.data,a.isAuthenticated&&e.localStorage.setItem("userProfile",JSON.stringify(t.data))})};return{getData:i}}]);
"use strict";angular.module("easyismath").factory("tools",["$state","$rootScope","$http","$sce",function(t,r,e,o){var a=function(t){return Math.floor(Math.random()*(t-2))},n=function(t){var e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.length,u=function(){for(var u=a(n);u===r.lastPictureNumber;)u=a(n);r.lastPictureNumber=u,e=t.slice(o)[u]};return u(),e};return{getRandomNumber:a,getImage:n}}]);
"use strict";!function(){angular.module("easyismath").controller("PenguinTroublesController",["$sce","$http","tools","$rootScope","oneone","$window","$state",function(t,e,r,u,n,a,s){function o(){return i().then(function(){c.currentButtonText=t.trustAsHtml(c.quizData.buttonText[c.counter]),c.currentText=t.trustAsHtml(c.quizData.data[c.counter]),c.currentImage=t.trustAsHtml(c.quizData.images[c.counter])})}function i(){return n.getData().then(function(t){return c.quizData=t,c.quizData})}var c=this;c.counter=0,c.answer="",c.penguinsSaved=0,c.currentButtonText,c.currentText,c.currentImage,c.quizData,u.isAuthenticated||s.go("home"),o(),u.lastPictureNumber=0,u.answerCompare,c.clicked=function(){c.quizData.images.length;return c.counter++,c.counter<2?(c.currentButtonText=t.trustAsHtml(c.quizData.buttonText[c.counter]),c.currentText=t.trustAsHtml(c.quizData.data[c.counter]),void(c.currentImage=t.trustAsHtml(c.quizData.images[c.counter]))):(c.counter>1&&(c.currentButtonText=t.trustAsHtml("Answer"),c.currentText=t.trustAsHtml("Quick, how many penguins are there?  Get 8 points to win!"),c.currentImage=t.trustAsHtml(r.getImage(c.quizData.images,2)),Number(c.answer)===c.quizData.questionAnswers[u.answerCompare]&&(c.penguinsSaved++,c.answer=""),u.answerCompare=u.lastPictureNumber,c.answer=""),void(8===c.penguinsSaved&&(c.currentText=t.trustAsHtml("You did it, you saved the penguins!"),c.currentImage=t.trustAsHtml(c.quizData.images[0]),n.rewardMedal(JSON.parse(a.localStorage.profile).user_id,"Pete","Level 2 : Hot, Hot Sun"))))}}])}();
"use strict";!function(){angular.module("easyismath").factory("oneone",["$http","$state","$rootScope","$sce","$window",function(e,t,n,o,a){function r(){function t(e){return e.data}function n(e){console.log(e)}return e.post("/api/gradeonemissionone",{}).then(t).catch(n)}function i(n,o,r){a.localStorage.reward="Pete",a.localStorage.rewardImage="<img src='https://d37rhhh8kt1fi0.cloudfront.net/img/1-1rewardpetebear.png' class='img-responsive' style='max-height:460px' />",e.post("/api/rewardmedal",{userid:n,medal:o,level:r}).then(function(e){setTimeout(function(){t.go("reward")},2500)})}return{getData:r,rewardMedal:i}}])}();
"use strict";!function(){angular.module("easyismath").controller("HotHotSunController",["$rootScope","onetwo","$sce",function(t,e,a){function r(){return n().then(function(){o.image=a.trustAsHtml(o.hardData.images[0]),o.text=a.trustAsHtml(o.hardData.text[0]),o.button=a.trustAsHtml(o.hardData.button[0])})}function n(){return e.getData().then(function(t){return o.hardData=t,o.hardData})}t.isAuthenticated||$state.go("home");var o=this;o.hardData,o.image,o.text,o.button,o.clicked1=e.firstClick,o.clicked2=e.nextClick,o.counter=1,o.problems=!1,o.answer,o.correctAnswer,o.score=0,r()}])}();
"use strict";!function(){angular.module("easyismath").factory("onetwo",["$http","$state","$rootScope","$sce","$window",function(t,r,e,s,o){function n(){function r(t){return t.data}function e(t){console.log(t)}return t.post("/api/gradeonemissiontwo",{}).then(r).catch(e)}function a(){if(this.counter>3)return void c();if(this.counter>2){this.problems=!0,this.button=s.trustAsHtml(this.hardData.button[2]);var t=u();return this.text=s.trustAsHtml(t.none+" + "+t.ntwo+" = "),this.correctAnswer=t.answer,void this.counter++}return this.counter>1?(this.text=s.trustAsHtml(this.hardData.text[this.counter]),void this.counter++):(this.image=s.trustAsHtml(this.hardData.images[this.counter]),this.text=s.trustAsHtml(this.hardData.text[this.counter]),this.button=s.trustAsHtml(this.hardData.button[this.counter]),l=this,void this.counter++)}function i(){if(this.correctAnswer===Number(this.answer)&&this.score++,2===this.score)return void h();var t=u();this.text=s.trustAsHtml(t.none+" + "+t.ntwo+" = "),this.correctAnswer=t.answer,this.answer=""}function u(){var t=Math.floor(10*Math.random()),r=Math.floor(10*Math.random()),e=t+r;return{none:t,ntwo:r,answer:e}}function h(){l.problems=!1,l.image=s.trustAsHtml(l.hardData.images[2]),l.text=s.trustAsHtml(l.hardData.text[3]),l.button=s.trustAsHtml(l.hardData.button[3])}function c(){o.localStorage.reward="Jumbo",o.localStorage.rewardImage="<img src='https://d37rhhh8kt1fi0.cloudfront.net/img/grade1/1-2/1-2jumbo.png' class='img-responsive' style='max-height:460px' />",t.post("/api/rewardmedal",{userid:JSON.parse(o.localStorage.profile).user_id,medal:"Jumbo",level:"Level 3: New Town Blues"}).then(function(t){r.go("reward")})}return{getData:n,firstClick:a,nextClick:i};var l}])}();